api.listali.co.il {
    # Enable gzip compression
    encode gzip

    # Reverse proxy to API container
    reverse_proxy api:5000 {
        # WebSocket support (Socket.IO)
        header_up Connection {>Connection}
        header_up Upgrade {>Upgrade}
        
        # Health check
        health_uri /health
        health_interval 30s
        health_timeout 5s
        
        # Transport settings for WebSockets
        transport http {
            dial_timeout 10s
            response_header_timeout 30s
        }
    }

    # Security headers
    header {
        # Remove server header
        -Server
    }

    # Logging
    log {
        output stdout
        format console
    }
}
